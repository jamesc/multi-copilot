{
  // Multi-Copilot Development Container Configuration
  //
  // Dockerfile: Installs base development dependencies
  // This file: Configures GitHub Copilot CLI, VS Code extensions, and workspace setup
  //
  // CUSTOMIZATION:
  // 1. Change "name" to your project name
  // 2. Update vscode extensions for your tech stack
  "name": "Multi-Copilot Development",
  "build": {
    "dockerfile": "Dockerfile",
    "context": ".."
  },
  "features": {
    "ghcr.io/devcontainers/features/copilot-cli:1": {}
  },
  "customizations": {
    "vscode": {
      "extensions": [
        // Add your project's extensions here
        "github.copilot",
        "github.vscode-github-actions",
        "github.vscode-pull-request-github",
        "ms-vscode-remote.remote-containers"
      ],
      "settings": {
        "editor.formatOnSave": true,
        "files.watcherExclude": {
          "**/node_modules/**": true
        }
      }
    }
  },
  "postCreateCommand": "echo 'Container created'",
  "postStartCommand": "bash .devcontainer/setup-git-auth.sh || true",
  "remoteUser": "vscode",
  // NOTE: For worktrees, the main .git mount is added via CLI --mount argument in worktree-up.ps1
  // ═══════════════════════════════════════════════════════════════════════════
  // DEVELOPMENT WORKFLOWS
  // ═══════════════════════════════════════════════════════════════════════════
  // 1. VS Code (simple): Open folder in VS Code, it will build the devcontainer
  //    - Basic git config from GIT_USER_NAME/GIT_USER_EMAIL env vars
  //    - Can build and develop normally
  //
  // 2. Git Worktrees (advanced): Use scripts/worktree-up.ps1 for parallel work
  //    - Creates worktrees with isolated containers
  //    - Sets up SSH commit signing
  //    - Configures Copilot CLI with MCP
  //    - See scripts/worktree-up.ps1 for details
  // ═══════════════════════════════════════════════════════════════════════════
  "containerEnv": {
    // Add project-specific container environment variables here
  },
  "runArgs": [
    "--label=git.worktree=${localWorkspaceFolderBasename}"
  ],
  "remoteEnv": {
    "GH_TOKEN": "${localEnv:GH_TOKEN}",
    "GITHUB_TOKEN": "${localEnv:GH_TOKEN}",
    "GIT_USER_NAME": "${localEnv:GIT_USER_NAME}",
    "GIT_USER_EMAIL": "${localEnv:GIT_USER_EMAIL}"
    // Add additional env vars your MCP servers need

  }
}
